# Polymarketå¥—åˆ©ç¨‹åº - é¡¹ç›®æ€»ç»“

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ª**å®Œæ•´çš„è‡ªåŠ¨åŒ–Polymarketå¥—åˆ©æœºå™¨äºº**ï¼Œèƒ½å¤Ÿï¼š
- ğŸ” å®æ—¶ç›‘æ§Polymarketé¢„æµ‹å¸‚åœº
- ğŸ¯ è‡ªåŠ¨æ£€æµ‹å¥—åˆ©æœºä¼š
- ğŸ¤– è‡ªåŠ¨æ‰§è¡Œäº¤æ˜“ï¼ˆæ¨¡æ‹Ÿ+å®ç›˜ï¼‰
- ğŸ“Š è·Ÿè¸ªå’Œåˆ†æäº¤æ˜“æ€§èƒ½
- ğŸ’¼ ä¼ä¸šçº§é£é™©ç®¡ç†

## ğŸ“ é¡¹ç›®ç»“æ„è¯¦è§£

```
polymarket_arbitrage/
â”œâ”€â”€ config/                      # é…ç½®æ¨¡å—
â”‚   â”œâ”€â”€ settings.py             # å…¨å±€é…ç½®å¸¸æ•°
â”‚   â”œâ”€â”€ logger.py               # æ—¥å¿—é…ç½®
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ src/                        # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ models.py              # æ•°æ®æ¨¡å‹ï¼ˆMarket, Order, Tradeç­‰ï¼‰
â”‚   â”œâ”€â”€ polymarket_api.py      # Polymarket APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ arbitrage_detector.py  # å¥—åˆ©æœºä¼šæ£€æµ‹å¼•æ“
â”‚   â”œâ”€â”€ trade_executor.py      # äº¤æ˜“æ‰§è¡Œå¼•æ“
â”‚   â”œâ”€â”€ database.py            # SQLiteæ•°æ®åº“ç®¡ç†
â”‚   â”œâ”€â”€ arbitrage_bot.py       # ä¸»æœºå™¨äººç±»
â”‚   â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ logs/                       # æ—¥å¿—æ–‡ä»¶ç›®å½•ï¼ˆè¿è¡Œåç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ main.py                     # ç¨‹åºå…¥å£
â”œâ”€â”€ test.py                     # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”œâ”€â”€ .env.example               # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚
â”œâ”€â”€ README.md                  # å®Œæ•´æ–‡æ¡£
â”œâ”€â”€ QUICKSTART.md              # å¿«é€Ÿå¼€å§‹æŒ‡å—
â””â”€â”€ ADVANCED.md                # é«˜çº§é…ç½®æŒ‡å—
```

## ğŸ”‘ æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. **models.py** - æ•°æ®æ¨¡å‹
```python
Market              # å¸‚åœºæ•°æ®æ¨¡å‹
Order               # è®¢å•æ¨¡å‹
ArbitrageOpportunity # å¥—åˆ©æœºä¼šæ¨¡å‹
Trade               # äº¤æ˜“è®°å½•æ¨¡å‹
```

### 2. **polymarket_api.py** - APIå®¢æˆ·ç«¯
```python
PolymarketAPI       # ä¸Polymarketé€šä¿¡çš„HTTPå®¢æˆ·ç«¯
- get_markets()     # è·å–å¸‚åœºåˆ—è¡¨
- get_order_book()  # è·å–è®¢å•ç°¿
- create_order()    # åˆ›å»ºè®¢å•
- cancel_order()    # å–æ¶ˆè®¢å•
```

### 3. **arbitrage_detector.py** - æ£€æµ‹å¼•æ“
```python
ArbitrageDetector   # å¥—åˆ©æœºä¼šæ£€æµ‹
- detect_opportunities()        # ä¸»æ£€æµ‹æ–¹æ³•
- _check_complementary_pair()   # æ£€æŸ¥äº’è¡¥å¯¹
- _calculate_max_size()         # è®¡ç®—æœ€å¤§äº¤æ˜“å¤§å°
```

### 4. **trade_executor.py** - æ‰§è¡Œå¼•æ“
```python
OrderSigner         # è®¢å•ç­¾ç½²ï¼ˆEIP-191ï¼‰
TradeExecutor       # äº¤æ˜“æ‰§è¡Œ
- execute_arbitrage()  # æ‰§è¡Œå¥—åˆ©äº¤æ˜“
- _create_buy_order()  # åˆ›å»ºä¹°å•
- _create_sell_order() # åˆ›å»ºå–å•
- close_trade()        # å¹³ä»“
```

### 5. **database.py** - æ•°æ®æŒä¹…åŒ–
```python
TradeDatabase       # SQLiteæ•°æ®åº“ç®¡ç†
- save_trade()      # ä¿å­˜äº¤æ˜“
- get_statistics()  # äº¤æ˜“ç»Ÿè®¡
- get_trades_by_status() # æŒ‰çŠ¶æ€æŸ¥è¯¢
```

### 6. **arbitrage_bot.py** - ä¸»æœºå™¨äºº
```python
ArbitrageBot        # å¥—åˆ©æœºå™¨äººä¸»ç±»
- start()           # å¯åŠ¨æœºå™¨äºº
- stop()            # åœæ­¢æœºå™¨äºº
- _scan_for_opportunities() # å®šæœŸæ‰«æ
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå®‰è£…
```bash
cd polymarket_arbitrage
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 2. é…ç½®è®¾ç½®
```bash
cp .env.example .env
# ç¼–è¾‘ .envï¼Œæ·»åŠ ä½ çš„ç§é’¥å’Œé’±åŒ…åœ°å€
```

### 3. è¿è¡Œæµ‹è¯•
```bash
python test.py
```

### 4. å¯åŠ¨æœºå™¨äºº
```bash
# æ¨¡æ‹Ÿæ¨¡å¼ï¼ˆæ¨èå…ˆç”¨ï¼‰
python main.py

# å®ç›˜æ¨¡å¼ï¼ˆä¿®æ”¹ .env: ENABLE_TRADING=trueï¼‰
python main.py
```

## ğŸ’¡ æ ¸å¿ƒç®—æ³•

### å¥—åˆ©æ£€æµ‹åŸç†

åœ¨äºŒå…ƒé¢„æµ‹å¸‚åœºï¼ˆBinary Marketsï¼‰ä¸­ï¼ŒYESå’ŒNOçš„ä»·æ ¼åº”è¯¥æ»¡è¶³ï¼š

$$P_{YES} + P_{NO} = 1.0$$

å½“ $P_{YES} + P_{NO} < 1.0$ æ—¶ï¼Œå­˜åœ¨å¥—åˆ©æœºä¼šï¼š

**å¥—åˆ©æ‰§è¡Œï¼š**
1. åŒæ—¶ä¹°å…¥YESå’ŒNO
2. å¤´å¯¸æˆæœ¬ = $(P_{YES} + P_{NO}) \times \text{æ•°é‡}$
3. åˆ°æœŸæ”¶ç›Š = $1.0 \times \text{æ•°é‡}$
4. å¥—åˆ©åˆ©æ¶¦ = $(1.0 - P_{YES} - P_{NO}) \times \text{æ•°é‡}$

**åˆ©æ¶¦ç‡è®¡ç®—ï¼š**
$$\text{åˆ©æ¶¦ç‡}\% = \frac{1.0 - (P_{YES} + P_{NO})}{P_{YES} + P_{NO}} \times 100$$

## ğŸ“Š å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å¯åŠ¨æœºå™¨äºº                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          å®šæœŸæ‰«æå¸‚åœºï¼ˆæ¯Nç§’ï¼‰                          â”‚
â”‚       è·å–æ‰€æœ‰æ´»è·ƒå¸‚åœº â†’ get_markets()                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       æ£€æµ‹å¥—åˆ©æœºä¼š                                       â”‚
â”‚    â€¢ è·å–è®¢å•ç°¿ä¿¡æ¯ â†’ get_order_book()                  â”‚
â”‚    â€¢ æå–ä»·æ ¼æ•°æ®                                       â”‚
â”‚    â€¢ æ£€æŸ¥äº’è¡¥å¯¹                                         â”‚
â”‚    â€¢ è®¡ç®—åˆ©æ¶¦ç‡                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                              â”‚
    æœ‰æœºä¼šå‘ç°                      æ— æœºä¼š
         â”‚                              â”‚
         â–¼                              â–¼
   æŒ‰åˆ©æ¶¦æ’åº                      ç­‰å¾…ä¸‹æ¬¡æ‰«æ
         â”‚                              â”‚
         â–¼                              â”‚
   æ‰§è¡Œæœ€ä½³æœºä¼š                        â”‚
         â”‚                              â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
    â”‚          â”‚        â”‚              â”‚
    â–¼          â–¼        â–¼              â”‚
  åˆ›å»ºä¹°å•  åˆ›å»ºå–å•  éªŒè¯è®¢å•        â”‚
    â”‚          â”‚        â”‚              â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”˜              â”‚
         â”‚          â”‚                  â”‚
         â–¼          â–¼                  â”‚
    è®¢å•ç¡®è®¤    å¹³ä»“äº¤æ˜“               â”‚
         â”‚          â”‚                  â”‚
         â–¼          â–¼                  â”‚
    ä¿å­˜åˆ°æ•°æ®åº“  æ˜¾ç¤ºåˆ©æ¶¦            â”‚
         â”‚          â”‚                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                     ç­‰å¾…ä¸‹æ¬¡æ‰«æ...
```

## ğŸ”§ é…ç½®å‚æ•°

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|-------|------|
| `MIN_PROFIT_PERCENTAGE` | float | 0.5 | æœ€å°åˆ©æ¶¦ç‡(%) |
| `MAX_POSITION_SIZE` | float | 100.0 | æœ€å¤§å¤´å¯¸(USDC) |
| `CHECK_INTERVAL` | int | 5 | æ‰«æé—´éš”(ç§’) |
| `ENABLE_TRADING` | bool | false | å¯ç”¨å®ç›˜äº¤æ˜“ |
| `LOG_LEVEL` | str | INFO | æ—¥å¿—çº§åˆ« |

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

ç¨‹åºè¿è¡Œç»“æŸåæ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ï¼š

```
============================================================
å¥—åˆ©æœºå™¨äººå·²åœæ­¢
æ£€æµ‹åˆ°çš„å¥—åˆ©æœºä¼š: 42
æ‰§è¡Œçš„äº¤æ˜“: 15
äº¤æ˜“ç»Ÿè®¡:
  - æ€»äº¤æ˜“æ•°: 15
  - å·²å¹³ä»“: 15
  - æ€»åˆ©æ¶¦: $12.45
  - å¹³å‡åˆ©æ¶¦ç‡: 0.83%
  - æœ€å¤§å•ç¬”åˆ©æ¶¦: $1.23
============================================================
```

## ğŸ” å®‰å…¨ç‰¹æ€§

1. **ç§é’¥ç®¡ç†**
   - ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨ï¼ˆä¸åœ¨ä»£ç ä¸­ï¼‰
   - `.env` æ–‡ä»¶åº”è¯¥åœ¨ `.gitignore` ä¸­
   - æ”¯æŒç¡¬ä»¶é’±åŒ…é›†æˆ

2. **è®¢å•ç­¾ç½²**
   - ä½¿ç”¨EIP-191æ ‡å‡†ç­¾ç½²
   - æ¯ä¸ªè®¢å•éƒ½ç»è¿‡å¯†ç å­¦éªŒè¯

3. **èµ„é‡‘ä¿æŠ¤**
   - å¤´å¯¸å¤§å°é™åˆ¶
   - æ—¥äº¤æ˜“é‡é™åˆ¶ï¼ˆå¯æ‰©å±•ï¼‰
   - è‡ªåŠ¨æ­¢æŸæœºåˆ¶ï¼ˆå¯æ‰©å±•ï¼‰

4. **æ•°æ®å¤‡ä»½**
   - SQLiteæ•°æ®åº“è‡ªåŠ¨å¤‡ä»½
   - æ—¥å¿—æ–‡ä»¶æŒä¹…åŒ–

## ğŸ“š æ–‡æ¡£ä½“ç³»

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| `README.md` | å®Œæ•´é¡¹ç›®è¯´æ˜å’ŒAPIæ–‡æ¡£ |
| `QUICKSTART.md` | æ–°ç”¨æˆ·å¿«é€Ÿå¼€å§‹æŒ‡å— |
| `ADVANCED.md` | é«˜çº§é…ç½®å’Œä¼˜åŒ– |
| ä»£ç æ³¨é‡Š | å†…è”æ–‡æ¡£å’Œç¤ºä¾‹ |

## ğŸ“ å­¦ä¹ ä»·å€¼

è¿™ä¸ªé¡¹ç›®å±•ç¤ºäº†ä»¥ä¸‹æŠ€æœ¯ï¼š

- **åŒºå—é“¾å¼€å‘**ï¼šä»¥å¤ªåŠã€Polygonã€Web3é›†æˆ
- **APIé›†æˆ**ï¼šRESTful APIå®¢æˆ·ç«¯å¼€å‘
- **æ•°æ®åº“**ï¼šSQLiteæ•°æ®å»ºæ¨¡å’ŒæŸ¥è¯¢
- **å¹¶å‘ç¼–ç¨‹**ï¼šå¼‚æ­¥æ“ä½œï¼ˆå¯æ‰©å±•ï¼‰
- **é£é™©ç®¡ç†**ï¼šé‡‘èç³»ç»Ÿä¸­çš„é£é™©æ§åˆ¶
- **æ—¥å¿—ç³»ç»Ÿ**ï¼šä¼ä¸šçº§æ—¥å¿—å’Œç›‘æ§
- **Pythonæœ€ä½³å®è·µ**ï¼šæ¨¡å—åŒ–ã€ç±»å‹æç¤ºã€é”™è¯¯å¤„ç†

## ğŸ”® æ‰©å±•æ–¹å‘

### çŸ­æœŸæ”¹è¿›
- [ ] æ·»åŠ å¤šçº¿ç¨‹æ”¯æŒ
- [ ] å®ç°ç¼“å­˜æœºåˆ¶
- [ ] æ·»åŠ å‘Šè­¦ç³»ç»Ÿï¼ˆDiscord/Telegramï¼‰
- [ ] Web UIä»ªè¡¨æ¿

### ä¸­æœŸæ”¹è¿›
- [ ] é›†æˆå…¶ä»–é¢„æµ‹å¸‚åœºå¹³å°
- [ ] è·¨å¹³å°å¥—åˆ©æ£€æµ‹
- [ ] æœºå™¨å­¦ä¹ ä»·æ ¼é¢„æµ‹
- [ ] é«˜çº§å¤´å¯¸ç®¡ç†

### é•¿æœŸæ”¹è¿›
- [ ] Market-makingç­–ç•¥
- [ ] AMMé›†æˆ
- [ ] æœŸæƒç­–ç•¥
- [ ] é‡åŒ–äº¤æ˜“æ¡†æ¶

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æ”¹è¿›å’Œæ‰©å±•è¿™ä¸ªé¡¹ç›®ï¼

## ğŸ“ è®¸å¯è¯

MIT License - å¼€æºä½¿ç”¨

## âš ï¸ å…è´£å£°æ˜

**æœ¬ç¨‹åºä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ç”¨é€”ã€‚**

ä½¿ç”¨æœ¬ç¨‹åºè¿›è¡Œå®é™…äº¤æ˜“æ—¶è¯·è‡ªæ‰¿é£é™©ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š
- å¸‚åœºé£é™©
- æ‰§è¡Œé£é™©
- æŠ€æœ¯é£é™©
- èµ„é‡‘æŸå¤±é£é™©

**ä½œè€…ä¸å¯¹ä»»ä½•äº¤æ˜“æŸå¤±è´Ÿè´£ã€‚**

---

## ğŸ“§ è·å–å¸®åŠ©

- æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£
- æ£€æŸ¥æ—¥å¿—æ–‡ä»¶äº†è§£é”™è¯¯
- è¿è¡Œæµ‹è¯•è„šæœ¬è¯Šæ–­é—®é¢˜
- æäº¤IssueæŠ¥å‘Šé—®é¢˜

**ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸš€**
